<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:TimerApp.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="600" d:DesignHeight="900"
        x:Class="TimerApp.Views.SettingsWindow"
        x:DataType="vm:SettingsViewModel"
        Title="Settings - Timer App"
        Width="600"
        Height="900"
        Background="#0A0E27"
        CanResize="True">

    <Design.DataContext>
        <vm:SettingsViewModel/>
    </Design.DataContext>

    <Window.Styles>
        <Style Selector="TextBlock.title">
            <Setter Property="Foreground" Value="#E0E0E0"/>
            <Setter Property="FontSize" Value="24"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Margin" Value="0,0,0,30"/>
        </Style>
        
        <Style Selector="TextBlock.sectionTitle">
            <Setter Property="Foreground" Value="#00D9FF"/>
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Margin" Value="0,0,0,15"/>
        </Style>
        
        <Style Selector="TextBlock.label">
            <Setter Property="Foreground" Value="#A0A0A0"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Margin" Value="0,0,0,8"/>
        </Style>
        
        <Style Selector="CheckBox">
            <Setter Property="Foreground" Value="#E0E0E0"/>
            <Setter Property="FontSize" Value="14"/>
        </Style>
        
        <Style Selector="ComboBox">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Foreground" Value="#E0E0E0"/>
            <Setter Property="Background" Value="#1A1F3A"/>
            <Setter Property="BorderBrush" Value="#2D3561"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="CornerRadius" Value="6"/>
            <Setter Property="Padding" Value="10"/>
        </Style>
        
        <Style Selector="Slider">
            <Setter Property="Foreground" Value="#6C5CE7"/>
        </Style>
        
        <Style Selector="TextBox">
            <Setter Property="Foreground" Value="#E0E0E0"/>
            <Setter Property="Background" Value="#1A1F3A"/>
            <Setter Property="BorderBrush" Value="#2D3561"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="CornerRadius" Value="6"/>
            <Setter Property="Padding" Value="10"/>
        </Style>
        
        <Style Selector="Button.primary">
            <Setter Property="Background" Value="#6C5CE7"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="30,15"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
        
        <Style Selector="Button.primary:pointerover">
            <Setter Property="Background" Value="#7D6EF8"/>
        </Style>
        
        <Style Selector="Button.secondary">
            <Setter Property="Background" Value="#2D3561"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="15,10"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="CornerRadius" Value="6"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
        
        <Style Selector="Button.secondary:pointerover">
            <Setter Property="Background" Value="#3D4571"/>
        </Style>
        
        <Style Selector="Button.colorSwatch">
            <Setter Property="Width" Value="50"/>
            <Setter Property="Height" Value="50"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="BorderBrush" Value="#2D3561"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
        
        <Style Selector="Button.colorSwatch:pointerover">
            <Setter Property="BorderBrush" Value="#6C5CE7"/>
            <Setter Property="BorderThickness" Value="3"/>
        </Style>
    </Window.Styles>

    <ScrollViewer>
        <StackPanel Margin="40,30" Spacing="10">
            <!-- Header -->
            <TextBlock Text="âš™ï¸ Settings" Classes="title" HorizontalAlignment="Center"/>

            <!-- Color Customization Section -->
            <Border Background="#1A1F3A" CornerRadius="12" Padding="25" Margin="0,0,0,20">
                <StackPanel Spacing="20">
                    <TextBlock Text="ðŸŽ¨ Display Colors" Classes="sectionTitle"/>
                    
                    <!-- Timer Color -->
                    <StackPanel Spacing="8">
                        <TextBlock Text="Timer Color (Normal Time)" Classes="label"/>
                        <Grid ColumnDefinitions="*,Auto,Auto">
                            <TextBox Grid.Column="0"
                                    Text="{Binding TimerColor}"
                                    Watermark="#00D9FF"
                                    Margin="0,0,10,0"/>
                            <Border Grid.Column="1"
                                   Width="40"
                                   Height="40"
                                   CornerRadius="6"
                                   Margin="0,0,10,0">
                                <Border.Background>
                                    <SolidColorBrush Color="{Binding TimerColor}"/>
                                </Border.Background>
                            </Border>
                            <Button Grid.Column="2"
                                   Content="ðŸ“‹"
                                   Classes="secondary"
                                   ToolTip.Tip="Color Presets"
                                   Name="TimerColorPresetButton"/>
                        </Grid>
                    </StackPanel>

                    <!-- Background Color -->
                    <StackPanel Spacing="8">
                        <TextBlock Text="Background Color" Classes="label"/>
                        <Grid ColumnDefinitions="*,Auto">
                            <TextBox Grid.Column="0"
                                    Text="{Binding BackgroundColor}"
                                    Watermark="#0A0E27"
                                    Margin="0,0,10,0"/>
                            <Border Grid.Column="1"
                                   Width="40"
                                   Height="40"
                                   CornerRadius="6">
                                <Border.Background>
                                    <SolidColorBrush Color="{Binding BackgroundColor}"/>
                </Border.Background>
                            </Border>
                        </Grid>
                    </StackPanel>
                    
                    <!-- Color Quick Select -->
                    <StackPanel Spacing="8">
                        <TextBlock Text="Quick Color Selection" Classes="label"/>
                        <WrapPanel Name="ColorPresetsPanel" Orientation="Horizontal"/>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- Background Image Section -->
            <Border Background="#1A1F3A" CornerRadius="12" Padding="25" Margin="0,0,0,20">
                <StackPanel Spacing="15">
                    <TextBlock Text="ðŸ–¼ï¸ Background Image" Classes="sectionTitle"/>
                    
                    <CheckBox Content="Use Background Image"
                            IsChecked="{Binding UseBackgroundImage}"/>
                    
                    <StackPanel Spacing="8" IsEnabled="{Binding UseBackgroundImage}">
                        <TextBlock Text="Image Path" Classes="label"/>
                        <Grid ColumnDefinitions="*,Auto">
                            <TextBox Grid.Column="0"
                                    Text="{Binding BackgroundImagePath}"
                                    IsReadOnly="True"
                                    Watermark="No image selected"
                                    Margin="0,0,10,0"/>
                            <Button Grid.Column="1"
                                   Content="Browse..."
                                   Classes="secondary"
                                   Command="{Binding BrowseBackgroundImageCommand}"/>
                        </Grid>
                        
                        <TextBlock Text="Image Opacity" Classes="label"/>
                        <Grid ColumnDefinitions="*,Auto">
                            <Slider Grid.Column="0"
                                   Value="{Binding BackgroundImageOpacity}"
                                   Minimum="0.1"
                                   Maximum="1.0"
                                   TickFrequency="0.1"
                                   IsSnapToTickEnabled="True"
                                   VerticalAlignment="Center"/>
                            <TextBlock Grid.Column="1"
                                      Text="{Binding BackgroundImageOpacity, StringFormat={}{0:P0}}"
                                      Foreground="#E0E0E0"
                                      FontSize="14"
                                      Margin="15,0,0,0"
                                      VerticalAlignment="Center"/>
                        </Grid>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- Display Settings -->
            <Border Background="#1A1F3A" CornerRadius="12" Padding="25" Margin="0,0,0,20">
                <StackPanel Spacing="15">
                    <TextBlock Text="ðŸ“º Display Settings" Classes="sectionTitle"/>
                    
                    <StackPanel Spacing="8">
                        <TextBlock Text="Font Size" Classes="label"/>
                        <Grid ColumnDefinitions="*,Auto">
                            <Slider Grid.Column="0"
                                    Value="{Binding FontSize}"
                                    Minimum="36"
                                    Maximum="144"
                                    TickFrequency="12"
                                    IsSnapToTickEnabled="True"
                                    VerticalAlignment="Center"/>
                            <TextBlock Grid.Column="1"
                                       Text="{Binding FontSize}"
                                       Foreground="#E0E0E0"
                                       FontSize="14"
                                       Margin="15,0,0,0"
                                       VerticalAlignment="Center"/>
                        </Grid>
                    </StackPanel>
                    
                    <StackPanel Spacing="8">
                        <TextBlock Text="Theme" Classes="label"/>
                        <ComboBox ItemsSource="{Binding AvailableThemes}"
                                SelectedItem="{Binding SelectedTheme}"
                                Width="200"
                                HorizontalAlignment="Left"/>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- Window Settings -->
            <Border Background="#1A1F3A" CornerRadius="12" Padding="25" Margin="0,0,0,20">
                <StackPanel Spacing="15">
                    <TextBlock Text="ðŸªŸ Window Settings" Classes="sectionTitle"/>
                    
                    <CheckBox Content="Always on Top" IsChecked="{Binding AlwaysOnTop}"/>
                    <CheckBox Content="Show in Taskbar" IsChecked="{Binding ShowInTaskbar}"/>
                    <CheckBox Content="Minimize to System Tray" IsChecked="{Binding MinimizeToTray}"/>
                </StackPanel>
            </Border>

            <!-- Sound Settings -->
            <Border Background="#1A1F3A" CornerRadius="12" Padding="25" Margin="0,0,0,20">
                <StackPanel Spacing="15">
                    <TextBlock Text="ðŸ”Š Sound Settings" Classes="sectionTitle"/>
                    
                    <CheckBox Content="Play Alarm Sound When Timer Ends"
                            IsChecked="{Binding PlayAlarmSound}"/>
                    
                    <StackPanel Spacing="8" IsEnabled="{Binding PlayAlarmSound}">
                        <TextBlock Text="Alarm Sound Type" Classes="label"/>
                        <Grid ColumnDefinitions="*,Auto" MaxWidth="400" HorizontalAlignment="Left">
                            <ComboBox Grid.Column="0"
                                    ItemsSource="{Binding AlarmTypes}"
                                    SelectedItem="{Binding SelectedAlarmType}"
                                    Margin="0,0,10,0"/>
                            <Button Grid.Column="1"
                                    Content="ðŸ”Š Test"
                                    Classes="secondary"
                                    Command="{Binding TestAlarmCommand}"/>
                        </Grid>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- Action Buttons -->
            <StackPanel Orientation="Horizontal"
                       HorizontalAlignment="Center"
                       Spacing="15"
                       Margin="0,20,0,0">
                <Button Content="ðŸ’¾ Save Settings"
                        Classes="primary"
                        Command="{Binding SaveSettingsCommand}"/>
                <Button Content="ðŸ”„ Reset to Defaults"
                        Classes="secondary"
                        Command="{Binding ResetToDefaultsCommand}"/>
            </StackPanel>
            
            <TextBlock Text="Settings are saved automatically"
                      Foreground="#707070"
                      FontSize="12"
                      FontStyle="Italic"
                      HorizontalAlignment="Center"
                      Margin="0,10,0,20"/>
        </StackPanel>
    </ScrollViewer>

</Window>
